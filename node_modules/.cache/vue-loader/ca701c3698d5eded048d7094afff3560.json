{"remainingRequest":"C:\\Users\\דנה\\Desktop\\Grooveo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\דנה\\Desktop\\Grooveo\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\דנה\\Desktop\\Grooveo\\src\\views\\Home.vue","mtime":1609614763256},{"path":"C:\\Users\\דנה\\Desktop\\Grooveo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\דנה\\Desktop\\Grooveo\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\דנה\\Desktop\\Grooveo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\דנה\\Desktop\\Grooveo\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzb3VuZHMgZnJvbSAiQC9kYXRhL3NvdW5kcyI7CmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6ICJIb21lIiwKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJc291bmRzLAoJCQlpc011c2ljUGF1c2VkOiBmYWxzZSwKCQkJaXNNdXNpY1BsYXlpbmc6IGZhbHNlLAoJCQlzaG93UmVjb3JkZXI6IGZhbHNlLAoJCX07Cgl9LAoJbWV0aG9kczogewoJCWdldEltZ1NyYyh0aXRsZSkgewoJCQlyZXR1cm4gcmVxdWlyZSgiQC9hc3NldHMvaW1nLyIgKyB0aXRsZSArICIuc3ZnIik7CgkJfSwKCQlzdG9wU291bmRzKCkgewoJCQl0aGlzLnNvdW5kcy5mb3JFYWNoKChzb3VuZCwga2V5KSA9PiB7CgkJCQl0aGlzLnN0b3BBdWRpbyhrZXkpOwoJCQl9KTsKCQkJaWYgKHRoaXMuaXNNdXNpY1BhdXNlZCkgdGhpcy5pc011c2ljUGF1c2VkID0gZmFsc2U7CgkJfSwKCQlwYXVzZVNvdW5kcygpIHsKCQkJaWYgKCF0aGlzLmlzTXVzaWNQbGF5aW5nKSByZXR1cm47CgkJCXRoaXMuc291bmRzLm1hcCgoc291bmQpID0+IHsKCQkJCS8vSW4gY2FzZSB3ZSB3YW50IHRvIHVucXVldSBvbiBwYXVzZToKCQkJCS8vIHNvdW5kLmlzUXVldWVkID0gZmFsc2U7CgkJCQlpZiAoc291bmQuaXNQbGF5aW5nKSB7CgkJCQkJc291bmQuYXVkaW8ucGF1c2UoKTsKCQkJCQlzb3VuZC5pc1BsYXlpbmcgPSBmYWxzZTsKCQkJCX0KCQkJfSk7CgkJCXRoaXMuaXNNdXNpY1BhdXNlZCA9IHRydWU7CgkJCXRoaXMuaXNNdXNpY1BsYXlpbmcgPSBmYWxzZTsKCQl9LAoJCXBsYXlTb3VuZHMoKSB7CgkJCXRoaXMuc291bmRzLm1hcCgoc291bmQpID0+IHsKCQkJCWlmIChzb3VuZC5hdWRpby5jdXJyZW50VGltZSAhPT0gMCkgewoJCQkJCXNvdW5kLmF1ZGlvLnBsYXkoKTsKCQkJCQlzb3VuZC5pc1BsYXlpbmcgPSB0cnVlOwoJCQkJCWlmICghdGhpcy5pc011c2ljUGxheWluZykgdGhpcy5pc011c2ljUGxheWluZyA9IHRydWU7CgkJCQl9CgkJCX0pOwoJCQl0aGlzLmlzTXVzaWNQYXVzZWQgPSBmYWxzZTsKCQl9LAoJCXN0YXR1c0NsYXNzKHNvdW5kKSB7CgkJCWlmIChzb3VuZC5pc1BsYXlpbmcpIHJldHVybiAicGxheWluZyI7CgkJCWlmIChzb3VuZC5pc1F1ZXVlZCkgcmV0dXJuICJxdWV1ZWQiOwoJCX0sCgkJcGxheVF1ZXVlZFNvdW5kcygpIHsKCQkJdGhpcy5zb3VuZHMgPSB0aGlzLnNvdW5kcy5tYXAoKHNvdW5kKSA9PiB7CgkJCQlpZiAoc291bmQuaXNRdWV1ZWQpIHsKCQkJCQlzb3VuZC5pc1F1ZXVlZCA9IGZhbHNlOwoJCQkJCXNvdW5kLmlzUGxheWluZyA9IHRydWU7CgkJCQkJc291bmQuYXVkaW8ucGxheSgpOwoJCQkJCXRoaXMucmVwbGF5T25FbmQoc291bmQuYXVkaW8pOwoJCQkJCWlmICghdGhpcy5pc011c2ljUGxheWluZykgdGhpcy5pc011c2ljUGxheWluZyA9IHRydWU7CgkJCQl9CgkJCQlyZXR1cm4gc291bmQ7CgkJCX0pOwoJCX0sCgkJc2V0TmV3TGVhZGVyKHNvdW5kKSB7CgkJCXNvdW5kLmlzTGVhZGVyID0gdHJ1ZTsKCQkJdGhpcy5yZWxlYXNlUXVldWVPbkVuZChzb3VuZC5hdWRpbyk7CgkJfSwKCQlmaW5kTmV3TGVhZGVyKCkgewoJCQljb25zdCBwbGF5aW5nU291bmRJbmRleCA9IHRoaXMuc291bmRzLmZpbmRJbmRleCgKCQkJCShzb3VuZCkgPT4gc291bmQuaXNQbGF5aW5nCgkJCSk7CgkJCWlmIChwbGF5aW5nU291bmRJbmRleCAhPT0gLTEpIHsKCQkJCXRoaXMuc2V0TmV3TGVhZGVyKHRoaXMuc291bmRzW3BsYXlpbmdTb3VuZEluZGV4XSk7CgkJCX0gZWxzZSB7CgkJCQljb25zdCBxdWV1ZWRTb3VuZEluZGV4ID0gdGhpcy5zb3VuZHMuZmluZEluZGV4KAoJCQkJCShzb3VuZCkgPT4gc291bmQuaXNRdWV1ZWQKCQkJCSk7CgkJCQlpZiAocXVldWVkU291bmRJbmRleCAhPT0gLTEpIHsKCQkJCQl0aGlzLnNldE5ld0xlYWRlcih0aGlzLnNvdW5kc1txdWV1ZWRTb3VuZEluZGV4XSk7CgkJCQl9CgkJCX0KCQl9LAoJCXJlbGVhc2VRdWV1ZU9uRW5kKGF1ZGlvKSB7CgkJCWNvbnN0IGN0eCA9IHRoaXM7CgkJCWF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoImVuZGVkIiwgKCkgPT4gewoJCQkJY3R4LnBsYXlRdWV1ZWRTb3VuZHMoKTsKCQkJfSk7CgkJfSwKCQlyZXBsYXlPbkVuZChhdWRpbykgewoJCQlhdWRpby5hZGRFdmVudExpc3RlbmVyKCJlbmRlZCIsICgpID0+IHsKCQkJCWF1ZGlvLnBsYXkoKTsKCQkJfSk7CgkJfSwKCQlzdG9wQXVkaW8oa2V5KSB7CgkJCWNvbnN0IHNvdW5kID0gdGhpcy5zb3VuZHNba2V5XTsKCQkJc291bmQuYXVkaW8ucGF1c2UoKTsKCQkJc291bmQuYXVkaW8uY3VycmVudFRpbWUgPSAwOwoJCQlzb3VuZC5pc1BsYXlpbmcgPSBmYWxzZTsKCQkJc291bmQuaXNRdWV1ZWQgPSBmYWxzZTsKCgkJCWlmIChzb3VuZC5pc0xlYWRlcikgewoJCQkJc291bmQuaXNMZWFkZXIgPSBmYWxzZTsKCQkJCXRoaXMuZmluZE5ld0xlYWRlcigpOwoJCQkJdGhpcy5pc011c2ljUGxheWluZyA9IHRoaXMuc291bmRzLnNvbWUoKHNvdW5kKSA9PiBzb3VuZC5pc1BsYXlpbmcpOwoJCQkJaWYgKCF0aGlzLmlzTXVzaWNQbGF5aW5nKSB7CgkJCQkJdGhpcy5wbGF5UXVldWVkU291bmRzKCk7CgkJCQl9CgkJCX0KCQl9LAoJCXBsYXlBdWRpbyhrZXkpIHsKCQkJY29uc3Qgc291bmQgPSB0aGlzLnNvdW5kc1trZXldOwoJCQlpZiAodGhpcy5pc011c2ljUGxheWluZyB8fCB0aGlzLmlzTXVzaWNQYXVzZWQpIHsKCQkJCXNvdW5kLmlzUXVldWVkID0gdHJ1ZTsKCQkJfSBlbHNlIHsKCQkJCXNvdW5kLmF1ZGlvLnBsYXkoKTsKCQkJCXNvdW5kLmlzUGxheWluZyA9IHRydWU7CgkJCQl0aGlzLnJlcGxheU9uRW5kKHNvdW5kLmF1ZGlvKTsKCQkJCXRoaXMuc2V0TmV3TGVhZGVyKHNvdW5kKTsKCQkJCXRoaXMuaXNNdXNpY1BsYXlpbmcgPSB0cnVlOwoJCQl9CgkJfSwKCX0sCgljcmVhdGVkKCkgewoJCXRoaXMuc291bmRzID0gdGhpcy5zb3VuZHMubWFwKChzb3VuZCkgPT4gKHsKCQkJLi4uc291bmQsCgkJCWF1ZGlvOiBuZXcgQXVkaW8oc291bmQuc3JjKSwKCQkJaXNQbGF5aW5nOiBmYWxzZSwKCQkJaXNRdWV1ZWQ6IGZhbHNlLAoJCQlpc0xlYWRlcjogZmFsc2UsCgkJfSkpOwoJfSwKfTsK"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<main class=\"home\">\n\t\t<section class=\"panel\">\n\t\t\t<h2>GR</h2>\n\t\t\t<img src=\"@/assets/img/stop.svg\" alt=\"Stop\" @click=\"stopSounds()\" />\n\t\t\t<img\n\t\t\t\tv-if=\"isMusicPaused\"\n\t\t\t\tsrc=\"@/assets/img/play.svg\"\n\t\t\t\talt=\"Play\"\n\t\t\t\t@click=\"playSounds()\"\n\t\t\t/>\n\t\t\t<img\n\t\t\t\tv-if=\"!isMusicPaused\"\n\t\t\t\tsrc=\"@/assets/img/pause.svg\"\n\t\t\t\talt=\"Pause\"\n\t\t\t\t@click=\"pauseSounds()\"\n\t\t\t/>\n\t\t\t<h2>VE</h2>\n\t\t\t<img\n\t\t\t\tsrc=\"@/assets/img/microphone.svg\"\n\t\t\t\talt=\"Play\"\n\t\t\t\t@click=\"showRecorder = !showRecorder\"\n\t\t\t/>\n\t\t</section>\n\t\t<section class=\"pads-container\">\n\t\t\t<div\n\t\t\t\tv-for=\"(sound, key) in sounds\"\n\t\t\t\t:key=\"sound.title\"\n\t\t\t\t:class=\"[statusClass(sound), 'pad-' + key]\"\n\t\t\t\tclass=\"pad\"\n\t\t\t\t@click=\"\n\t\t\t\t\t!sound.isPlaying && !sound.isQueued ? playAudio(key) : stopAudio(key)\n\t\t\t\t\"\n\t\t\t>\n\t\t\t\t<img class=\"icon\" :src=\"getImgSrc(sound.title)\" :alt=\"sound.title\" />\n\t\t\t</div>\n\t\t</section>\n\t\t<audio-recorder\n\t\t\tclass=\"recorder\"\n\t\t\tv-if=\"showRecorder\"\n\t\t\t:filename=\"'Grooveo-Mix'\"\n\t\t\t:show-upload-button=\"false\"\n\t\t/>\n\t\t<img class=\"illustration\" src=\"@/assets/img/bg.jpg\" />\n\t</main>\n</template>\n\n<script>\nimport sounds from \"@/data/sounds\";\nexport default {\n\tname: \"Home\",\n\tdata() {\n\t\treturn {\n\t\t\tsounds,\n\t\t\tisMusicPaused: false,\n\t\t\tisMusicPlaying: false,\n\t\t\tshowRecorder: false,\n\t\t};\n\t},\n\tmethods: {\n\t\tgetImgSrc(title) {\n\t\t\treturn require(\"@/assets/img/\" + title + \".svg\");\n\t\t},\n\t\tstopSounds() {\n\t\t\tthis.sounds.forEach((sound, key) => {\n\t\t\t\tthis.stopAudio(key);\n\t\t\t});\n\t\t\tif (this.isMusicPaused) this.isMusicPaused = false;\n\t\t},\n\t\tpauseSounds() {\n\t\t\tif (!this.isMusicPlaying) return;\n\t\t\tthis.sounds.map((sound) => {\n\t\t\t\t//In case we want to unqueu on pause:\n\t\t\t\t// sound.isQueued = false;\n\t\t\t\tif (sound.isPlaying) {\n\t\t\t\t\tsound.audio.pause();\n\t\t\t\t\tsound.isPlaying = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.isMusicPaused = true;\n\t\t\tthis.isMusicPlaying = false;\n\t\t},\n\t\tplaySounds() {\n\t\t\tthis.sounds.map((sound) => {\n\t\t\t\tif (sound.audio.currentTime !== 0) {\n\t\t\t\t\tsound.audio.play();\n\t\t\t\t\tsound.isPlaying = true;\n\t\t\t\t\tif (!this.isMusicPlaying) this.isMusicPlaying = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.isMusicPaused = false;\n\t\t},\n\t\tstatusClass(sound) {\n\t\t\tif (sound.isPlaying) return \"playing\";\n\t\t\tif (sound.isQueued) return \"queued\";\n\t\t},\n\t\tplayQueuedSounds() {\n\t\t\tthis.sounds = this.sounds.map((sound) => {\n\t\t\t\tif (sound.isQueued) {\n\t\t\t\t\tsound.isQueued = false;\n\t\t\t\t\tsound.isPlaying = true;\n\t\t\t\t\tsound.audio.play();\n\t\t\t\t\tthis.replayOnEnd(sound.audio);\n\t\t\t\t\tif (!this.isMusicPlaying) this.isMusicPlaying = true;\n\t\t\t\t}\n\t\t\t\treturn sound;\n\t\t\t});\n\t\t},\n\t\tsetNewLeader(sound) {\n\t\t\tsound.isLeader = true;\n\t\t\tthis.releaseQueueOnEnd(sound.audio);\n\t\t},\n\t\tfindNewLeader() {\n\t\t\tconst playingSoundIndex = this.sounds.findIndex(\n\t\t\t\t(sound) => sound.isPlaying\n\t\t\t);\n\t\t\tif (playingSoundIndex !== -1) {\n\t\t\t\tthis.setNewLeader(this.sounds[playingSoundIndex]);\n\t\t\t} else {\n\t\t\t\tconst queuedSoundIndex = this.sounds.findIndex(\n\t\t\t\t\t(sound) => sound.isQueued\n\t\t\t\t);\n\t\t\t\tif (queuedSoundIndex !== -1) {\n\t\t\t\t\tthis.setNewLeader(this.sounds[queuedSoundIndex]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\treleaseQueueOnEnd(audio) {\n\t\t\tconst ctx = this;\n\t\t\taudio.addEventListener(\"ended\", () => {\n\t\t\t\tctx.playQueuedSounds();\n\t\t\t});\n\t\t},\n\t\treplayOnEnd(audio) {\n\t\t\taudio.addEventListener(\"ended\", () => {\n\t\t\t\taudio.play();\n\t\t\t});\n\t\t},\n\t\tstopAudio(key) {\n\t\t\tconst sound = this.sounds[key];\n\t\t\tsound.audio.pause();\n\t\t\tsound.audio.currentTime = 0;\n\t\t\tsound.isPlaying = false;\n\t\t\tsound.isQueued = false;\n\n\t\t\tif (sound.isLeader) {\n\t\t\t\tsound.isLeader = false;\n\t\t\t\tthis.findNewLeader();\n\t\t\t\tthis.isMusicPlaying = this.sounds.some((sound) => sound.isPlaying);\n\t\t\t\tif (!this.isMusicPlaying) {\n\t\t\t\t\tthis.playQueuedSounds();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tplayAudio(key) {\n\t\t\tconst sound = this.sounds[key];\n\t\t\tif (this.isMusicPlaying || this.isMusicPaused) {\n\t\t\t\tsound.isQueued = true;\n\t\t\t} else {\n\t\t\t\tsound.audio.play();\n\t\t\t\tsound.isPlaying = true;\n\t\t\t\tthis.replayOnEnd(sound.audio);\n\t\t\t\tthis.setNewLeader(sound);\n\t\t\t\tthis.isMusicPlaying = true;\n\t\t\t}\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.sounds = this.sounds.map((sound) => ({\n\t\t\t...sound,\n\t\t\taudio: new Audio(sound.src),\n\t\t\tisPlaying: false,\n\t\t\tisQueued: false,\n\t\t\tisLeader: false,\n\t\t}));\n\t},\n};\n</script>\n<style lang=\"scss\" scoped>\n</style>\n"]}]}